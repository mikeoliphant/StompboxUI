// generated automatically
// DO NOT MODIFY!
declare id "plexi";
declare name "Plexi";
declare category "Extern";
declare shortname "Plexi";
declare description "Plexi";
declare oversample "4";

import("stdfaust.lib");


p3 = pre : fi.iir((b0/a0,b1/a0,b2/a0,b3/a0,b4/a0,b5/a0),(a1/a0,a2/a0,a3/a0,a4/a0,a5/a0)) : plexipowerampclip with {
    LogPot(a, x) = ba.if(a, (exp(a * x) - 1) / (exp(a) - 1), x);
    Inverted(b, x) = ba.if(b, 1 - x, x);
    s = 0.993;
    fs = float(ma.SR);
    pre = _;



    Presense = vslider("Presense[name:Presense]", 0.5, 0, 1, 0.01) : Inverted(1) : si.smooth(s);

    b0 = Presense*(Presense*pow(fs,2)*(fs*(fs*(-2.3334608448669e-23*fs - 2.91538144925964e-21) - 1.8478317276844e-22) - 1.62773154056433e-22) + pow(fs,2)*(fs*(fs*(2.38012186177351e-23*fs + 2.97367316646687e-21) + 1.87744471107996e-22) + 1.62773154056433e-22)) + fs*(fs*(fs*(2.38012186177351e-20*fs + 2.97367316646687e-18) + 1.87744471107996e-19) + 1.62773154056433e-19);

    b1 = Presense*(Presense*pow(fs,2)*(fs*(fs*(1.16673042243345e-22*fs + 8.74614434777892e-21) + 1.8478317276844e-22) - 1.62773154056433e-22) + pow(fs,2)*(fs*(fs*(-1.19006093088676e-22*fs - 8.9210194994006e-21) - 1.87744471107996e-22) + 1.62773154056433e-22)) + fs*(fs*(fs*(-7.14036558532053e-20*fs - 2.97367316646687e-18) + 1.87744471107996e-19) + 4.88319462169298e-19);

    b2 = Presense*(Presense*pow(fs,2)*(fs*(fs*(-2.3334608448669e-22*fs - 5.83076289851928e-21) + 3.69566345536879e-22) + 3.25546308112866e-22) + pow(fs,2)*(fs*(fs*(2.38012186177351e-22*fs + 5.94734633293373e-21) - 3.75488942215992e-22) - 3.25546308112866e-22)) + fs*(fs*(fs*(4.76024372354702e-20*fs - 5.94734633293373e-18) - 3.75488942215992e-19) + 3.25546308112866e-19);

    b3 = Presense*(Presense*pow(fs,2)*(fs*(fs*(2.3334608448669e-22*fs - 5.83076289851928e-21) - 3.69566345536879e-22) + 3.25546308112866e-22) + pow(fs,2)*(fs*(fs*(-2.38012186177351e-22*fs + 5.94734633293373e-21) + 3.75488942215992e-22) - 3.25546308112866e-22)) + fs*(fs*(fs*(4.76024372354702e-20*fs + 5.94734633293373e-18) - 3.75488942215992e-19) - 3.25546308112866e-19);

    b4 = Presense*(Presense*pow(fs,2)*(fs*(fs*(-1.16673042243345e-22*fs + 8.74614434777892e-21) - 1.8478317276844e-22) - 1.62773154056433e-22) + pow(fs,2)*(fs*(fs*(1.19006093088676e-22*fs - 8.9210194994006e-21) + 1.87744471107996e-22) + 1.62773154056433e-22)) + fs*(fs*(fs*(-7.14036558532053e-20*fs + 2.97367316646687e-18) + 1.87744471107996e-19) - 4.88319462169298e-19);

    b5 = Presense*(Presense*pow(fs,2)*(fs*(fs*(2.3334608448669e-23*fs - 2.91538144925964e-21) + 1.8478317276844e-22) - 1.62773154056433e-22) + pow(fs,2)*(fs*(fs*(-2.38012186177351e-23*fs + 2.97367316646687e-21) - 1.87744471107996e-22) + 1.62773154056433e-22)) + fs*(fs*(fs*(2.38012186177351e-20*fs - 2.97367316646687e-18) + 1.87744471107996e-19) - 1.62773154056433e-19);

    a0 = Presense*(Presense*fs*(fs*(fs*(fs*(-8.60995185091346e-24*fs - 1.10853855898189e-20) - 2.32580925010789e-18) - 1.35252203100558e-16) - 1.14107022001133e-16) + fs*(fs*(fs*(fs*(1.15287202864694e-23*fs + 1.1978459678459e-20) + 2.41360758290699e-18) + 1.37991531166445e-16) + 1.16387813873793e-16)) + fs*(fs*(fs*(1.15287202864694e-20*fs + 1.1978459678459e-17) + 2.41360758290699e-15) + 1.37991531166445e-13) + 1.16387813873793e-13;

    a1 = Presense*(Presense*fs*(fs*(fs*(fs*(4.30497592545673e-23*fs + 3.32561567694566e-20) + 2.32580925010789e-18) - 1.35252203100558e-16) - 3.42321066003398e-16) + fs*(fs*(fs*(fs*(-5.76436014323472e-23*fs - 3.59353790353771e-20) - 2.41360758290699e-18) + 1.37991531166445e-16) + 3.4916344162138e-16)) + fs*(fs*(fs*(-3.45861608594083e-20*fs - 1.1978459678459e-17) + 2.41360758290699e-15) + 4.13974593499336e-13) + 5.81939069368967e-13;

    a2 = Presense*(Presense*fs*(fs*(fs*(fs*(-8.60995185091346e-23*fs - 2.21707711796377e-20) + 4.65161850021578e-18) + 2.70504406201115e-16) - 2.28214044002265e-16) + fs*(fs*(fs*(fs*(1.15287202864694e-22*fs + 2.39569193569181e-20) - 4.82721516581398e-18) - 2.75983062332891e-16) + 2.32775627747587e-16)) + fs*(fs*(fs*(2.30574405729389e-20*fs - 2.3956919356918e-17) - 4.82721516581398e-15) + 2.75983062332891e-13) + 1.16387813873793e-12;

    a3 = Presense*(Presense*fs*(fs*(fs*(fs*(8.60995185091346e-23*fs - 2.21707711796377e-20) - 4.65161850021578e-18) + 2.70504406201115e-16) + 2.28214044002265e-16) + fs*(fs*(fs*(fs*(-1.15287202864694e-22*fs + 2.39569193569181e-20) + 4.82721516581398e-18) - 2.75983062332891e-16) - 2.32775627747587e-16)) + fs*(fs*(fs*(2.30574405729389e-20*fs + 2.3956919356918e-17) - 4.82721516581398e-15) - 2.75983062332891e-13) + 1.16387813873793e-12;

    a4 = Presense*(Presense*fs*(fs*(fs*(fs*(-4.30497592545673e-23*fs + 3.32561567694566e-20) - 2.32580925010789e-18) - 1.35252203100558e-16) + 3.42321066003398e-16) + fs*(fs*(fs*(fs*(5.76436014323472e-23*fs - 3.59353790353771e-20) + 2.41360758290699e-18) + 1.37991531166445e-16) - 3.4916344162138e-16)) + fs*(fs*(fs*(-3.45861608594083e-20*fs + 1.1978459678459e-17) + 2.41360758290699e-15) - 4.13974593499336e-13) + 5.81939069368967e-13;

    a5 = Presense*(Presense*fs*(fs*(fs*(fs*(8.60995185091346e-24*fs - 1.10853855898189e-20) + 2.32580925010789e-18) - 1.35252203100558e-16) + 1.14107022001133e-16) + fs*(fs*(fs*(fs*(-1.15287202864694e-23*fs + 1.1978459678459e-20) - 2.41360758290699e-18) + 1.37991531166445e-16) - 1.16387813873793e-16)) + fs*(fs*(fs*(1.15287202864694e-20*fs - 1.1978459678459e-17) + 2.41360758290699e-15) - 1.37991531166445e-13) + 1.16387813873793e-13;
};

plexipowerampclip = _<: ba.if(signbit(_), plexipoweramp_neg_clip, plexipoweramp_clip) :>_ with {

    signbit = ffunction(int signbit(float), "math.h", "");

    plexipoweramp_clip = ffunction(float plexipowerampclip(float), "plexipoweramp_table.h", "");

    plexipoweramp_neg_clip = ffunction(float plexipoweramp_negclip(float), "plexipoweramp_neg_table.h", "");

};

process =  p3;